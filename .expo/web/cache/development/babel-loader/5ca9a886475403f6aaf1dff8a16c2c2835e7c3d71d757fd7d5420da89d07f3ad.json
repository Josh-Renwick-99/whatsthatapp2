{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SectionList from \"react-native-web/dist/exports/SectionList\";\nimport styles from \"../StyleSheets/contactsStyles\";\nimport Contact from \"../components/Contact\";\nimport { addContact } from \"../util/Client\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ContactList = function ContactList(_ref) {\n  var contacts = _ref.contacts,\n    fromContacts = _ref.fromContacts;\n  var _useState = useState(contacts),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var sections = data.reduce(function (acc, contact) {\n    var letter = contact.last_name ? contact.last_name : contact.family_name.charAt(0).toUpperCase();\n    var sectionIndex = acc.findIndex(function (section) {\n      return section.title === letter;\n    });\n    if (sectionIndex >= 0) {\n      acc[sectionIndex].data.push(contact);\n    } else {\n      acc.push({\n        title: letter,\n        data: [contact]\n      });\n    }\n    return acc;\n  }, []);\n  var renderSectionHeader = function renderSectionHeader(_ref2) {\n    var section = _ref2.section;\n    return _jsx(View, {\n      style: {\n        backgroundColor: 'lightgray',\n        padding: 10\n      },\n      children: _jsx(Text, {\n        style: {\n          fontWeight: 'bold',\n          fontSize: 16,\n          color: 'green'\n        },\n        children: section.title\n      })\n    });\n  };\n  var _removeContact = function removeContact(contact) {\n    var updatedData = data.filter(function (c) {\n      return c !== contact;\n    });\n    setData(updatedData);\n  };\n  var _addContact = function addContact(id) {\n    var postAddContact = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(_addContact(id));\n            case 2:\n              console.log(\"Finished added contact\");\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n    postAddContact();\n  };\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item;\n    return _jsx(Contact, {\n      item: item,\n      removeContact: function removeContact() {\n        return _removeContact(item);\n      },\n      addContact: function addContact() {\n        return _addContact(item.user_id);\n      },\n      fromContacts: fromContacts\n    });\n  };\n  return _jsx(View, {\n    style: styles.listContainer,\n    children: _jsx(SectionList, {\n      sections: sections,\n      keyExtractor: function keyExtractor(item, index) {\n        return item + index;\n      },\n      renderItem: renderItem,\n      renderSectionHeader: renderSectionHeader\n    })\n  });\n};\nexport default ContactList;","map":{"version":3,"names":["React","useState","useEffect","View","Text","SectionList","styles","Contact","addContact","jsx","_jsx","ContactList","_ref","contacts","fromContacts","_useState","_useState2","_slicedToArray","data","setData","sections","reduce","acc","contact","letter","last_name","family_name","charAt","toUpperCase","sectionIndex","findIndex","section","title","push","renderSectionHeader","_ref2","style","backgroundColor","padding","children","fontWeight","fontSize","color","removeContact","updatedData","filter","c","id","postAddContact","_callee","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","console","log","stop","Promise","renderItem","_ref3","item","user_id","listContainer","keyExtractor","index"],"sources":["C:/Users/Joshua/Documents/repos/whatsthatapp2/components/ContactList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, SectionList } from 'react-native';\r\nimport styles  from '../StyleSheets/contactsStyles'\r\nimport Contact from '../components/Contact'\r\nimport { addContact } from '../util/Client';\r\nconst ContactList = ({contacts, fromContacts}) => {\r\n    const [data, setData] = useState(contacts);\r\n\r\n    const sections = data.reduce((acc, contact) => {\r\n        const letter = contact.last_name ? contact.last_name : contact.family_name.charAt(0).toUpperCase();\r\n        const sectionIndex = acc.findIndex(section => section.title === letter);\r\n        if (sectionIndex >= 0) {\r\n        acc[sectionIndex].data.push(contact);\r\n        } else {\r\n        acc.push({ title: letter, data: [contact] });\r\n        }\r\n        return acc;\r\n  }, []);\r\n\r\n  const renderSectionHeader = ({ section }) => (\r\n    <View style={{ backgroundColor: 'lightgray', padding: 10,}}>\r\n      <Text style={{ fontWeight: 'bold', fontSize: 16, color: 'green' }}>{section.title}</Text>\r\n    </View>\r\n  );\r\n\r\n  const removeContact = (contact) => {\r\n    const updatedData = data.filter((c) => c !== contact);\r\n    setData(updatedData);\r\n  };\r\n\r\n  const addContact = (id) => {\r\n    const postAddContact = async () => {\r\n        await addContact(id)\r\n        console.log(\"Finished added contact\")\r\n    }\r\n    postAddContact();\r\n  }\r\n\r\n  const renderItem = ({ item }) => (\r\n    <Contact \r\n        item={item} \r\n        removeContact={() => removeContact(item)}\r\n        addContact={() => addContact(item.user_id)}\r\n        fromContacts = {fromContacts}>\r\n    </Contact>\r\n  );\r\n\r\n  return (\r\n      <View style={styles.listContainer}>\r\n        <SectionList\r\n          sections={sections}\r\n          keyExtractor={(item, index) => item + index}\r\n          renderItem={renderItem}\r\n          renderSectionHeader={renderSectionHeader}\r\n        />\r\n      </View>\r\n  );\r\n};\r\n\r\nexport default ContactList"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}